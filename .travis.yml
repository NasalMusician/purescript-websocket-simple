language: node_js
sudo: false
node_js:
  - 5.6
install:
- npm install purescript bower pulp -g
- bower install
script:
  - pulp build && pulp docs
  - bower link
  - cd example/ && bower link purescript-websocket-simple && bower install && pulp build

after_success:
  - >-
    test $TRAVIS_TAG &&
    psc-publish > .pursuit.json &&
    curl -X POST https://pursuit.purescript.org/packages \
      -d @.pursuit.json \
      -H 'Accept: application/json' \
      -H "Authorization: token ${GITHUB_TOKEN}"
